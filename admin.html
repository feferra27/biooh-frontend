<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>BiOOH Admin</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=DM+Serif+Display&display=swap" rel="stylesheet">
  <style>
    :root {
      --red:     #C8102E;
      --red-d:   #A50E26;
      --red-bg:  #FFF0F2;
      --red-br:  #FECDD3;
      --ink:     #0F172A;
      --sub:     #475569;
      --muted:   #94A3B8;
      --border:  #E2E8F0;
      --bg:      #F8FAFC;
      --white:   #FFFFFF;
      --green:   #10B981;
      --green-bg:#ECFDF5;
      --amber:   #F59E0B;
      --sidebar: 340px;
      --header:  58px;
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; overflow: hidden; }
    body { font-family: 'DM Sans', system-ui, sans-serif; background: var(--bg); color: var(--ink); }

    /* â•â• LOGIN SCREEN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    #loginScreen {
      position: fixed; inset: 0;
      display: flex; align-items: center; justify-content: center;
      background: var(--ink);
      z-index: 9999;
    }
    #loginScreen.hidden { display: none; }

    .login-card {
      background: var(--white);
      border-radius: 16px;
      padding: 40px;
      width: 360px;
      box-shadow: 0 24px 64px rgba(0,0,0,.3);
    }
    .login-logo { display: flex; align-items: center; gap: 10px; margin-bottom: 32px; }
    .login-mark { width: 36px; height: 36px; border-radius: 9px; background: var(--red); }
    .login-brand { font-weight: 700; font-size: 20px; color: var(--ink); }
    .login-tag { font-size: 13px; color: var(--muted); }

    .login-card h2 {
      font-family: 'DM Serif Display', serif;
      font-size: 24px; font-weight: 400;
      color: var(--ink); margin-bottom: 6px;
    }
    .login-card p { font-size: 14px; color: var(--sub); margin-bottom: 28px; }

    .field { margin-bottom: 16px; }
    .field label { display: block; font-size: 12px; font-weight: 600; color: var(--sub); margin-bottom: 6px; }
    .field input {
      width: 100%; padding: 10px 14px;
      border: 1px solid var(--border); border-radius: 9px;
      font: 400 14px 'DM Sans', sans-serif; color: var(--ink);
      background: var(--bg); outline: none; transition: border-color .15s;
    }
    .field input:focus { border-color: #93C5FD; background: var(--white); }

    .login-err {
      font-size: 13px; color: var(--red);
      margin-bottom: 14px; min-height: 18px;
    }

    .btn-primary {
      width: 100%; padding: 11px;
      background: var(--red); border: none; border-radius: 9px;
      font: 600 14px 'DM Sans', sans-serif; color: white;
      cursor: pointer; transition: background .15s;
    }
    .btn-primary:hover { background: var(--red-d); }

    /* â•â• APP SHELL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    #app { display: flex; flex-direction: column; height: 100%; }

    /* HEADER */
    .header {
      height: var(--header);
      display: flex; align-items: center; justify-content: space-between;
      padding: 0 20px;
      background: var(--white); border-bottom: 1px solid var(--border);
      flex-shrink: 0; z-index: 100;
    }
    .h-left { display: flex; align-items: center; gap: 14px; }
    .h-brand { display: flex; align-items: center; gap: 9px; }
    .h-mark  { width: 28px; height: 28px; border-radius: 7px; background: var(--red); }
    .h-name  { font-weight: 700; font-size: 15px; color: var(--ink); }
    .h-sep   { width: 1px; height: 20px; background: var(--border); }
    .h-title { font-size: 13px; color: var(--sub); font-weight: 500; }

    .h-right { display: flex; align-items: center; gap: 8px; }

    .save-btn {
      display: flex; align-items: center; gap: 7px;
      padding: 8px 18px; border-radius: 8px;
      background: var(--red); border: none;
      font: 600 13px 'DM Sans', sans-serif; color: white;
      cursor: pointer; transition: background .15s;
    }
    .save-btn:hover { background: var(--red-d); }
    .save-btn:disabled { opacity: .5; cursor: not-allowed; }

    .save-btn .dot {
      width: 6px; height: 6px; border-radius: 50%;
      background: rgba(255,255,255,.5);
      transition: background .2s;
    }
    .save-btn.dirty .dot { background: #FCD34D; }

    .ghost-btn {
      padding: 8px 14px; border-radius: 8px;
      border: 1px solid var(--border); background: var(--white);
      font: 500 13px 'DM Sans', sans-serif; color: var(--sub);
      cursor: pointer; transition: all .15s;
    }
    .ghost-btn:hover { background: var(--bg); color: var(--ink); }

    .status-pill {
      padding: 4px 10px; border-radius: 999px;
      font-size: 11px; font-weight: 600;
    }
    .status-pill.saved   { background: var(--green-bg); color: var(--green); }
    .status-pill.saving  { background: #FEF3C7; color: var(--amber); }
    .status-pill.err     { background: var(--red-bg); color: var(--red); }

    /* â•â• LAYOUT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .layout { flex: 1; display: flex; overflow: hidden; }

    /* â•â• SLIDE LIST â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .slide-list-col {
      width: var(--sidebar);
      flex-shrink: 0;
      background: var(--white);
      border-right: 1px solid var(--border);
      display: flex; flex-direction: column;
      overflow: hidden;
    }

    .sl-top {
      padding: 14px 16px;
      border-bottom: 1px solid var(--border);
      display: flex; align-items: center; justify-content: space-between;
    }
    .sl-top h3 { font-size: 13px; font-weight: 700; color: var(--ink); }
    .sl-count  { font-size: 11px; color: var(--muted); font-weight: 500; }

    .add-slide-btn {
      display: flex; align-items: center; gap: 5px;
      padding: 6px 12px; border-radius: 7px;
      background: var(--red-bg); border: 1px solid var(--red-br);
      font: 600 12px 'DM Sans', sans-serif; color: var(--red);
      cursor: pointer; transition: all .15s;
    }
    .add-slide-btn:hover { background: var(--red-br); }

    .sl-list {
      flex: 1; overflow-y: auto; padding: 10px;
    }
    .sl-list::-webkit-scrollbar { width: 4px; }
    .sl-list::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }

    .slide-item {
      border: 1px solid var(--border); border-radius: 10px;
      padding: 10px 12px; margin-bottom: 6px;
      background: var(--white); cursor: pointer;
      transition: all .15s;
      display: flex; align-items: center; gap: 10px;
      user-select: none;
    }
    .slide-item:hover { border-color: #CBD5E1; box-shadow: 0 2px 8px rgba(0,0,0,.06); }
    .slide-item.active { border-color: var(--red); background: var(--red-bg); }
    .slide-item.dragging { opacity: .4; }
    .slide-item.drag-over { border-color: var(--red); border-style: dashed; }

    .drag-handle {
      cursor: grab; color: var(--muted); font-size: 14px;
      flex-shrink: 0; padding: 2px 0;
    }
    .drag-handle:active { cursor: grabbing; }

    .slide-thumb {
      width: 52px; height: 34px; border-radius: 5px;
      background: #E2E8F0; overflow: hidden; flex-shrink: 0;
      position: relative;
    }
    .slide-thumb img {
      width: 100%; height: 100%; object-fit: cover; display: block;
    }
    .slide-thumb-no-img {
      width: 100%; height: 100%;
      display: flex; align-items: center; justify-content: center;
      font-size: 18px; background: var(--bg);
    }

    .slide-meta { flex: 1; min-width: 0; }
    .slide-meta-title {
      font-size: 12px; font-weight: 600; color: var(--ink);
      white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
      margin-bottom: 2px;
    }
    .slide-meta-dur {
      font-size: 11px; color: var(--muted);
    }
    .slide-item.active .slide-meta-title { color: var(--red); }

    .slide-del {
      width: 24px; height: 24px;
      display: flex; align-items: center; justify-content: center;
      border: none; background: none; cursor: pointer;
      border-radius: 5px; color: var(--muted); font-size: 14px;
      transition: all .15s; flex-shrink: 0;
    }
    .slide-del:hover { background: var(--red-bg); color: var(--red); }

    /* â•â• EDITOR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .editor-col {
      flex: 1; display: flex; flex-direction: column; overflow: hidden;
    }

    .editor-tabs {
      display: flex; align-items: center;
      padding: 0 20px;
      background: var(--white); border-bottom: 1px solid var(--border);
      flex-shrink: 0;
    }
    .tab-btn {
      padding: 14px 16px; font: 500 13px 'DM Sans', sans-serif;
      color: var(--muted); border: none; background: none;
      cursor: pointer; border-bottom: 2px solid transparent;
      margin-bottom: -1px; transition: all .15s;
    }
    .tab-btn:hover { color: var(--ink); }
    .tab-btn.active { color: var(--red); border-bottom-color: var(--red); font-weight: 600; }

    .tab-content { display: none; flex: 1; overflow: hidden; }
    .tab-content.active { display: flex; }

    /* EDIT TAB */
    .edit-form {
      flex: 1; overflow-y: auto; padding: 24px;
    }
    .edit-form::-webkit-scrollbar { width: 4px; }
    .edit-form::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }

    .form-row { margin-bottom: 20px; }
    .form-row label {
      display: block; font-size: 11px; font-weight: 700;
      color: var(--sub); letter-spacing: .6px; text-transform: uppercase;
      margin-bottom: 7px;
    }
    .form-input, .form-textarea, .form-select {
      width: 100%; padding: 9px 12px;
      border: 1px solid var(--border); border-radius: 8px;
      font: 400 14px 'DM Sans', sans-serif; color: var(--ink);
      background: var(--white); outline: none; transition: border-color .15s;
    }
    .form-input:focus, .form-textarea:focus, .form-select:focus {
      border-color: #93C5FD;
    }
    .form-textarea { resize: vertical; min-height: 80px; line-height: 1.6; }
    .form-hint { font-size: 11.5px; color: var(--muted); margin-top: 5px; }

    .form-row-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }

    /* image url + preview */
    .img-row { display: flex; gap: 10px; align-items: flex-start; }
    .img-row .form-input { flex: 1; }
    .img-preview-thumb {
      width: 72px; height: 48px; border-radius: 7px;
      border: 1px solid var(--border); background: var(--bg);
      object-fit: cover; flex-shrink: 0;
    }

    /* bullets editor */
    .bullets-list { margin-bottom: 8px; }
    .bullet-row {
      display: flex; gap: 7px; align-items: center; margin-bottom: 6px;
    }
    .bullet-row input {
      flex: 1; padding: 8px 11px;
      border: 1px solid var(--border); border-radius: 7px;
      font: 400 13px 'DM Sans', sans-serif; color: var(--ink);
      outline: none; transition: border-color .15s;
    }
    .bullet-row input:focus { border-color: #93C5FD; }
    .bullet-del-btn {
      width: 28px; height: 28px; flex-shrink: 0;
      display: flex; align-items: center; justify-content: center;
      border: 1px solid var(--border); border-radius: 7px;
      background: none; cursor: pointer; font-size: 13px; color: var(--muted);
      transition: all .15s;
    }
    .bullet-del-btn:hover { background: var(--red-bg); color: var(--red); border-color: var(--red-br); }
    .add-bullet-btn {
      display: flex; align-items: center; gap: 5px;
      font: 500 12px 'DM Sans', sans-serif; color: var(--sub);
      background: none; border: 1px dashed var(--border);
      padding: 7px 12px; border-radius: 7px; cursor: pointer;
      transition: all .15s; width: 100%;
    }
    .add-bullet-btn:hover { border-color: var(--red); color: var(--red); }

    /* SECTIONS editor */
    .section-block {
      border: 1px solid var(--border); border-radius: 10px;
      padding: 14px; margin-bottom: 10px; background: var(--bg);
    }
    .section-block-top {
      display: flex; align-items: center; justify-content: space-between;
      margin-bottom: 10px;
    }
    .section-block-top span {
      font-size: 11px; font-weight: 700; color: var(--sub);
      text-transform: uppercase; letter-spacing: .6px;
    }

    /* PREVIEW TAB */
    .preview-wrap {
      flex: 1; background: #1E293B;
      display: flex; align-items: center; justify-content: center;
      padding: 32px;
    }

    .preview-screen {
      width: 100%; max-width: 900px;
      aspect-ratio: 16/9;
      border-radius: 10px; overflow: hidden;
      box-shadow: 0 32px 80px rgba(0,0,0,.5);
      position: relative;
      display: grid; grid-template-columns: 46% 54%;
      background: var(--white);
    }

    .preview-photo {
      position: relative; background: #E2E8F0; overflow: hidden;
    }
    .preview-photo img {
      width: 100%; height: 100%; object-fit: cover; display: block;
    }
    .preview-photo::after {
      content: ''; position: absolute; inset: 0;
      background: linear-gradient(to right, transparent 50%, #fff 100%);
    }
    .preview-no-img {
      width: 100%; height: 100%;
      display: flex; align-items: center; justify-content: center;
      font-size: 48px; background: #F1F5F9;
    }

    .preview-body {
      display: flex; align-items: center;
      padding: 20px 28px 80px 20px;
      background: var(--white);
      overflow: hidden;
    }
    .preview-inner { width: 100%; }

    .preview-title {
      font-family: 'DM Serif Display', serif;
      font-size: clamp(14px, 2.4vw, 22px);
      line-height: 1.2; color: var(--ink); margin-bottom: 10px;
    }
    .preview-sec-head {
      font-size: clamp(8px, .9vw, 10px); font-weight: 700;
      text-transform: uppercase; letter-spacing: 1px;
      color: #C8102E; margin-bottom: 4px; margin-top: 10px;
    }
    .preview-sec-text {
      font-size: clamp(9px, 1.1vw, 12px); color: #374151; line-height: 1.5;
    }
    .preview-bul { list-style: none; }
    .preview-bul li {
      font-size: clamp(9px, 1.1vw, 12px); color: #374151;
      padding: 2px 0 2px 14px; position: relative; line-height: 1.4;
    }
    .preview-bul li::before {
      content: 'â€º'; position: absolute; left: 0;
      color: #C8102E; font-size: 14px; line-height: 1.2; font-weight: 700;
    }

    .preview-footer {
      position: absolute; bottom: 0; left: 0; right: 0;
      height: 52px;
      display: grid; grid-template-columns: 1fr auto 1fr;
      align-items: center; padding: 0 16px; gap: 0;
      background: var(--white); border-top: 1px solid var(--border);
    }
    .pf-left  { display: flex; align-items: baseline; gap: 6px; }
    .pf-city  { font-size: 9px; font-weight: 700; }
    .pf-date  { font-size: 9px; color: var(--muted); }
    .pf-mid   { display: flex; align-items: center; gap: 8px; }
    .pf-div   { width: 1px; height: 24px; background: var(--border); }
    .pf-time  { font-size: 22px; font-weight: 700; font-variant-numeric: tabular-nums; letter-spacing: -1px; }
    .pf-right { display: flex; justify-content: flex-end; gap: 12px; }
    .pf-wx    { display: flex; flex-direction: column; align-items: center; gap: 1px; }
    .pf-wlbl  { font-size: 7px; font-weight: 600; color: var(--muted); }
    .pf-wtmp  { font-size: 12px; font-weight: 700; }
    .pf-wico  { font-size: 12px; }

    /* â”€â”€ empty state â”€â”€ */
    .editor-empty {
      flex: 1; display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      gap: 12px; color: var(--muted);
    }
    .editor-empty-icon { font-size: 48px; opacity: .4; }
    .editor-empty-text { font-size: 14px; font-weight: 500; }

    /* toast */
    .toast {
      position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%);
      background: var(--ink); color: white;
      padding: 10px 20px; border-radius: 9px;
      font-size: 13px; font-weight: 500;
      box-shadow: 0 8px 24px rgba(0,0,0,.3);
      opacity: 0; transition: opacity .2s;
      pointer-events: none; z-index: 9000; white-space: nowrap;
    }
    .toast.show { opacity: 1; }
  </style>
</head>
<body>

<!-- â•â• LOGIN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="loginScreen">
  <div class="login-card">
    <div class="login-logo">
      <div class="login-mark"></div>
      <div>
        <div class="login-brand">BiOOH</div>
        <div class="login-tag">Admin Panel</div>
      </div>
    </div>
    <h2>Entrar</h2>
    <p>Acesso restrito Ã  equipe BiOOH</p>
    <div class="field">
      <label>UsuÃ¡rio</label>
      <input id="loginUser" type="text" placeholder="admin" autocomplete="username">
    </div>
    <div class="field">
      <label>Senha</label>
      <input id="loginPass" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password"
             onkeydown="if(event.key==='Enter') doLogin()">
    </div>
    <div class="login-err" id="loginErr"></div>
    <button class="btn-primary" onclick="doLogin()">Entrar</button>
  </div>
</div>

<!-- â•â• APP â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="app" style="display:none">

  <!-- HEADER -->
  <div class="header">
    <div class="h-left">
      <div class="h-brand">
        <div class="h-mark"></div>
        <span class="h-name">BiOOH</span>
      </div>
      <div class="h-sep"></div>
      <span class="h-title">Admin â€” Slides</span>
    </div>
    <div class="h-right">
      <span class="status-pill saved" id="statusPill">Salvo</span>
      <button class="ghost-btn" onclick="doLogout()">Sair</button>
      <button class="save-btn" id="saveBtn" onclick="savePlaylist()">
        <span class="dot"></span> Publicar alteraÃ§Ãµes
      </button>
    </div>
  </div>

  <!-- LAYOUT -->
  <div class="layout">

    <!-- SLIDE LIST -->
    <div class="slide-list-col">
      <div class="sl-top">
        <div>
          <h3>Slides</h3>
          <div class="sl-count" id="slideCount">0 slides</div>
        </div>
        <button class="add-slide-btn" onclick="addSlide()">ï¼‹ Novo slide</button>
      </div>
      <div class="sl-list" id="slideList"></div>
    </div>

    <!-- EDITOR -->
    <div class="editor-col" id="editorCol">

      <!-- empty state -->
      <div class="editor-empty" id="editorEmpty">
        <div class="editor-empty-icon">ğŸ“‹</div>
        <div class="editor-empty-text">Selecione um slide para editar</div>
      </div>

      <!-- tabs + form (hidden until slide selected) -->
      <div id="editorMain" style="display:none; flex-direction:column; flex:1; overflow:hidden">

        <div class="editor-tabs">
          <button class="tab-btn active" onclick="switchTab('edit',this)">âœï¸ Editar</button>
          <button class="tab-btn" onclick="switchTab('preview',this)">ğŸ‘ï¸ Preview</button>
        </div>

        <!-- EDIT TAB -->
        <div class="tab-content active" id="tab-edit">
          <div class="edit-form" id="editForm">

            <div class="form-row">
              <label>TÃ­tulo principal</label>
              <input class="form-input" id="fTitle" type="text" placeholder="Ex: HipertensÃ£o: o inimigo silencioso" oninput="onFieldChange()">
            </div>

            <div class="form-row">
              <label>Imagem (URL)</label>
              <div class="img-row">
                <input class="form-input" id="fImage" type="url"
                       placeholder="https://images.unsplash.com/photo-â€¦?w=1200&q=80"
                       oninput="onImageChange()">
                <img id="imgThumb" class="img-preview-thumb" src="" alt="" style="display:none">
              </div>
              <div class="form-hint">Cole uma URL de imagem. SugestÃ£o: <a href="https://unsplash.com" target="_blank" style="color:var(--red)">unsplash.com</a> (gratuito)</div>
            </div>

            <div class="form-row-2">
              <div class="form-row" style="margin-bottom:0">
                <label>DuraÃ§Ã£o (segundos)</label>
                <input class="form-input" id="fDuration" type="number" min="5" max="60" value="20" oninput="onFieldChange()">
              </div>
              <div class="form-row" style="margin-bottom:0">
                <label>Badge / etiqueta</label>
                <input class="form-input" id="fBadge" type="text" placeholder="Ex: URGENTE, PrevenÃ§Ã£o, Exame" oninput="onFieldChange()">
              </div>
            </div>

            <div style="margin-top:20px; padding-top:20px; border-top:1px solid var(--border)">
              <div style="font-size:12px;font-weight:700;color:var(--sub);text-transform:uppercase;letter-spacing:.6px;margin-bottom:14px">
                SeÃ§Ãµes de conteÃºdo
              </div>
              <div id="sectionsContainer"></div>
              <button class="add-bullet-btn" onclick="addSection()" style="margin-top:6px">
                ï¼‹ Adicionar seÃ§Ã£o
              </button>
            </div>

          </div>
        </div>

        <!-- PREVIEW TAB -->
        <div class="tab-content" id="tab-preview">
          <div class="preview-wrap">
            <div class="preview-screen" id="previewScreen">
              <div class="preview-photo" id="previewPhoto">
                <div class="preview-no-img" id="previewNoImg">ğŸ–¼ï¸</div>
                <img id="previewImg" src="" alt="" style="display:none">
              </div>
              <div class="preview-body">
                <div class="preview-inner" id="previewInner"></div>
              </div>
              <div class="preview-footer">
                <div class="pf-left">
                  <span class="pf-city">SÃ£o Paulo</span>
                  <span class="pf-date" id="pDate">SEG, 16 Fev</span>
                </div>
                <div class="pf-mid">
                  <div class="pf-div"></div>
                  <div class="pf-time" id="pTime">--:--</div>
                  <div class="pf-div"></div>
                </div>
                <div class="pf-right">
                  <div class="pf-wx"><div class="pf-wlbl">Hoje</div><div class="pf-wtmp">23Â°</div><div class="pf-wico">â›…</div></div>
                  <div class="pf-wx"><div class="pf-wlbl">TerÃ§a</div><div class="pf-wtmp">25Â°</div><div class="pf-wico">â˜€ï¸</div></div>
                  <div class="pf-wx"><div class="pf-wlbl">Quarta</div><div class="pf-wtmp">22Â°</div><div class="pf-wico">ğŸŒ§ï¸</div></div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
// â”€â”€â”€ CONFIG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
var API_BASE = (function(){
  var p = new URLSearchParams(location.search);
  return p.get('api') || 'https://biooh-backend-1.onrender.com';
})();
var CLINIC = (function(){
  var p = new URLSearchParams(location.search);
  return p.get('clinic') || 'default';
})();
var ADMIN_USER = 'biooh';
var ADMIN_PASS = 'biooh2024';   // â† altere para a senha real

// â”€â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
var slides   = [];
var selIdx   = -1;
var isDirty  = false;

// â”€â”€â”€ LOGIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function doLogin(){
  var u = document.getElementById('loginUser').value.trim();
  var p = document.getElementById('loginPass').value;
  if(u === ADMIN_USER && p === ADMIN_PASS){
    document.getElementById('loginScreen').classList.add('hidden');
    document.getElementById('app').style.display = 'flex';
    document.getElementById('app').style.flexDirection = 'column';
    loadPlaylist();
  } else {
    document.getElementById('loginErr').textContent = 'UsuÃ¡rio ou senha incorretos.';
    document.getElementById('loginPass').value = '';
  }
}

function doLogout(){
  document.getElementById('loginScreen').classList.remove('hidden');
  document.getElementById('app').style.display = 'none';
}

// â”€â”€â”€ LOAD PLAYLIST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function loadPlaylist(){
  var url = API_BASE + '/api/playlist?clinic=' + encodeURIComponent(CLINIC);
  setStatus('saving','Carregandoâ€¦');
  fetch(url)
    .then(function(r){ return r.ok ? r.json() : Promise.reject(r.status); })
    .then(function(data){
      slides = (data && data.items) ? JSON.parse(JSON.stringify(data.items)) : getDefaultSlides();
      selIdx = -1;
      renderList();
      setStatus('saved','Carregado');
      showToast('Playlist carregada do servidor');
    })
    .catch(function(){
      slides = getDefaultSlides();
      renderList();
      setStatus('saved','Modo offline');
      showToast('Servidor indisponÃ­vel â€” usando conteÃºdo local');
    });
}

// â”€â”€â”€ SAVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function savePlaylist(){
  setStatus('saving','Publicandoâ€¦');
  document.getElementById('saveBtn').disabled = true;

  var payload = { items: slides };
  var url = API_BASE + '/api/playlist?clinic=' + encodeURIComponent(CLINIC);

  fetch(url, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(payload)
  })
    .then(function(r){ return r.ok ? r.json() : Promise.reject(r.status); })
    .then(function(){
      isDirty = false;
      markClean();
      setStatus('saved','Publicado âœ“');
      showToast('Slides publicados com sucesso!');
    })
    .catch(function(e){
      setStatus('err','Erro ao salvar');
      showToast('Erro ao publicar â€” verifique a conexÃ£o');
    })
    .finally(function(){
      document.getElementById('saveBtn').disabled = false;
    });
}

function markDirty(){
  isDirty = true;
  document.getElementById('saveBtn').classList.add('dirty');
  setStatus('saving','AlteraÃ§Ãµes nÃ£o salvas');
}
function markClean(){
  isDirty = false;
  document.getElementById('saveBtn').classList.remove('dirty');
}

function setStatus(type, txt){
  var el = document.getElementById('statusPill');
  el.className = 'status-pill ' + type;
  el.textContent = txt;
}

// â”€â”€â”€ RENDER LIST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderList(){
  var list = document.getElementById('slideList');
  var count = document.getElementById('slideCount');
  count.textContent = slides.length + ' slide' + (slides.length !== 1 ? 's' : '');

  if(!slides.length){
    list.innerHTML = '<div style="padding:24px;text-align:center;color:var(--muted);font-size:13px">Nenhum slide.<br>Clique em + Novo slide.</div>';
    return;
  }

  list.innerHTML = slides.map(function(s, i){
    var active = i === selIdx ? 'active' : '';
    var dur = Math.round((s.duration || s.dur || 20000) / 1000);
    var thumb = s.image || s.img || '';
    var thumbHtml = thumb
      ? '<img src="'+esc(thumb)+'" alt="" loading="lazy" onerror="this.style.display=\'none\'">'
      : '<div class="slide-thumb-no-img">ğŸ“„</div>';

    return '<div class="slide-item '+active+'" data-idx="'+i+'"'+
      ' draggable="true"'+
      ' onclick="selectSlide('+i+')"'+
      ' ondragstart="dragStart(event,'+i+')"'+
      ' ondragover="dragOver(event,'+i+')"'+
      ' ondragleave="dragLeave(event)"'+
      ' ondrop="dragDrop(event,'+i+')"'+
      ' ondragend="dragEnd()"'+
    '>'+
      '<span class="drag-handle" title="Arrastar para reordenar">â ¿</span>'+
      '<div class="slide-thumb">'+thumbHtml+'</div>'+
      '<div class="slide-meta">'+
        '<div class="slide-meta-title">'+esc(s.title || '(Sem tÃ­tulo)')+'</div>'+
        '<div class="slide-meta-dur">'+dur+'s</div>'+
      '</div>'+
      '<button class="slide-del" onclick="deleteSlide(event,'+i+')" title="Remover">âœ•</button>'+
    '</div>';
  }).join('');
}

// â”€â”€â”€ SELECT SLIDE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function selectSlide(idx){
  selIdx = idx;
  renderList();
  loadEditor(slides[idx]);
  document.getElementById('editorEmpty').style.display = 'none';
  var em = document.getElementById('editorMain');
  em.style.display = 'flex';
}

function loadEditor(s){
  document.getElementById('fTitle').value    = s.title || s.t || '';
  document.getElementById('fImage').value    = s.image || s.img || '';
  document.getElementById('fDuration').value = Math.round((s.duration || s.dur || 20000)/1000);
  document.getElementById('fBadge').value    = s.badge || '';

  onImageChange();
  renderSections(s.sections || s.secs || []);
  updatePreview();
}

// â”€â”€â”€ FIELD CHANGES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function onFieldChange(){
  if(selIdx < 0) return;
  flushToSlide();
  renderList();
  updatePreview();
  markDirty();
}

function onImageChange(){
  var url = document.getElementById('fImage').value.trim();
  var thumb = document.getElementById('imgThumb');
  if(url){ thumb.src = url; thumb.style.display = 'block'; }
  else    { thumb.style.display = 'none'; }
  onFieldChange();
}

function flushToSlide(){
  if(selIdx < 0) return;
  var s = slides[selIdx];
  s.title    = document.getElementById('fTitle').value.trim();
  s.image    = document.getElementById('fImage').value.trim();
  s.img      = s.image;
  s.duration = parseInt(document.getElementById('fDuration').value) * 1000 || 20000;
  s.dur      = s.duration;
  s.badge    = document.getElementById('fBadge').value.trim();
  s.sections = readSections();
  s.secs     = s.sections;
}

// â”€â”€â”€ SECTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderSections(secs){
  var container = document.getElementById('sectionsContainer');
  container.innerHTML = '';
  (secs||[]).forEach(function(sec, si){
    container.appendChild(buildSectionBlock(sec, si));
  });
}

function buildSectionBlock(sec, si){
  var div = document.createElement('div');
  div.className = 'section-block';
  div.dataset.si = si;

  var bulletsHtml = (sec.b||sec.bullets||[]).map(function(b, bi){
    return '<div class="bullet-row">'+
      '<input type="text" value="'+esc(b)+'" placeholder="Ponto '+ï¼ˆbi+1)+'â€¦" oninput="onFieldChange()">'+
      '<button class="bullet-del-btn" onclick="removeBullet('+si+','+bi+')" title="Remover">âœ•</button>'+
    '</div>';
  }).join('');

  div.innerHTML =
    '<div class="section-block-top">'+
      '<span>SeÃ§Ã£o '+(si+1)+'</span>'+
      '<button class="bullet-del-btn" onclick="removeSection('+si+')" title="Remover seÃ§Ã£o">âœ• Remover seÃ§Ã£o</button>'+
    '</div>'+
    '<div class="form-row" style="margin-bottom:10px">'+
      '<label>TÃ­tulo da seÃ§Ã£o</label>'+
      '<input class="form-input" type="text" data-sh="1" value="'+esc(sec.h||sec.heading||'')+'" placeholder="Ex: Sintomas, O que Ã©?, PrevenÃ§Ã£oâ€¦" oninput="onFieldChange()">'+
    '</div>'+
    '<div class="form-row" style="margin-bottom:10px">'+
      '<label>Texto introdutÃ³rio (opcional)</label>'+
      '<textarea class="form-textarea" data-st="1" placeholder="ExplicaÃ§Ã£o de 1-3 linhasâ€¦" oninput="onFieldChange()">'+esc(sec.t||sec.text||'')+'</textarea>'+
    '</div>'+
    '<div class="form-row" style="margin-bottom:6px"><label>Bullets</label></div>'+
    '<div class="bullets-list" data-bl="1">'+bulletsHtml+'</div>'+
    '<button class="add-bullet-btn" onclick="addBullet('+si+')">ï¼‹ Adicionar bullet</button>';

  return div;
}

function readSections(){
  var secs = [];
  var blocks = document.querySelectorAll('.section-block');
  blocks.forEach(function(block){
    var h  = block.querySelector('[data-sh]').value.trim();
    var t  = block.querySelector('[data-st]').value.trim();
    var bl = block.querySelectorAll('[data-bl] input');
    var b  = [];
    bl.forEach(function(inp){ if(inp.value.trim()) b.push(inp.value.trim()); });
    secs.push({ h:h, t:t, b:b, heading:h, text:t, bullets:b });
  });
  return secs;
}

function addSection(){
  if(selIdx < 0) return;
  flushToSlide();
  var s = slides[selIdx];
  s.sections = s.sections || [];
  s.sections.push({ h:'', t:'', b:[] });
  s.secs = s.sections;
  renderSections(s.sections);
  markDirty();
}

function removeSection(si){
  if(selIdx < 0) return;
  flushToSlide();
  slides[selIdx].sections.splice(si, 1);
  slides[selIdx].secs = slides[selIdx].sections;
  renderSections(slides[selIdx].sections);
  updatePreview();
  markDirty();
}

function addBullet(si){
  if(selIdx < 0) return;
  flushToSlide();
  slides[selIdx].sections[si].b.push('');
  slides[selIdx].sections[si].bullets = slides[selIdx].sections[si].b;
  slides[selIdx].secs = slides[selIdx].sections;
  renderSections(slides[selIdx].sections);
  markDirty();
}

function removeBullet(si, bi){
  if(selIdx < 0) return;
  flushToSlide();
  slides[selIdx].sections[si].b.splice(bi,1);
  slides[selIdx].sections[si].bullets = slides[selIdx].sections[si].b;
  slides[selIdx].secs = slides[selIdx].sections;
  renderSections(slides[selIdx].sections);
  updatePreview();
  markDirty();
}

// â”€â”€â”€ ADD / DELETE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function addSlide(){
  var newSlide = {
    title: 'Novo slide',
    image: '', img: '',
    duration: 20000, dur: 20000,
    badge: '',
    sections: [{ h:'O que Ã©?', t:'', b:[] }],
    secs:     [{ h:'O que Ã©?', t:'', b:[] }]
  };
  slides.push(newSlide);
  selectSlide(slides.length - 1);
  markDirty();
}

function deleteSlide(e, idx){
  e.stopPropagation();
  if(!confirm('Remover este slide?')) return;
  slides.splice(idx, 1);
  if(selIdx >= slides.length) selIdx = slides.length - 1;
  if(selIdx >= 0) selectSlide(selIdx);
  else {
    selIdx = -1;
    document.getElementById('editorEmpty').style.display = 'flex';
    document.getElementById('editorMain').style.display = 'none';
  }
  renderList();
  markDirty();
}

// â”€â”€â”€ DRAG & DROP REORDER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
var dragSrc = -1;
function dragStart(e, idx){ dragSrc = idx; e.currentTarget.classList.add('dragging'); }
function dragOver(e, idx){
  e.preventDefault();
  document.querySelectorAll('.slide-item').forEach(function(el){ el.classList.remove('drag-over'); });
  if(idx !== dragSrc) e.currentTarget.classList.add('drag-over');
}
function dragLeave(e){ e.currentTarget.classList.remove('drag-over'); }
function dragEnd(){
  document.querySelectorAll('.slide-item').forEach(function(el){
    el.classList.remove('dragging','drag-over');
  });
}
function dragDrop(e, idx){
  e.preventDefault();
  if(dragSrc < 0 || dragSrc === idx) return;
  var moved = slides.splice(dragSrc, 1)[0];
  slides.splice(idx, 0, moved);
  selIdx = idx;
  dragSrc = -1;
  renderList();
  markDirty();
  showToast('Slides reordenados');
}

// â”€â”€â”€ PREVIEW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updatePreview(){
  if(selIdx < 0) return;
  flushToSlide();
  var s = slides[selIdx];

  // image
  var img = s.image || s.img || '';
  var pImg = document.getElementById('previewImg');
  var pNoImg = document.getElementById('previewNoImg');
  if(img){ pImg.src = img; pImg.style.display = 'block'; pNoImg.style.display = 'none'; }
  else   { pImg.style.display = 'none'; pNoImg.style.display = 'flex'; }

  // text
  var inner = document.getElementById('previewInner');
  var secs  = s.sections || s.secs || [];
  var secsHtml = secs.map(function(sec){
    var bHtml = (sec.b||sec.bullets||[]).map(function(b){
      return '<li>'+esc(b)+'</li>';
    }).join('');
    return (sec.h ? '<div class="preview-sec-head">'+esc(sec.h)+'</div>' : '')+
           (sec.t ? '<p class="preview-sec-text">'+esc(sec.t)+'</p>' : '')+
           (bHtml ? '<ul class="preview-bul">'+bHtml+'</ul>' : '');
  }).join('');

  inner.innerHTML =
    '<div class="preview-title">'+esc(s.title||'')+'</div>'+secsHtml;
}

// â”€â”€â”€ TABS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function switchTab(name, btn){
  document.querySelectorAll('.tab-btn').forEach(function(b){ b.classList.remove('active'); });
  document.querySelectorAll('.tab-content').forEach(function(t){ t.classList.remove('active'); });
  btn.classList.add('active');
  document.getElementById('tab-'+name).classList.add('active');
  if(name === 'preview') updatePreview();
}

// â”€â”€â”€ CLOCK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
var DAYS=['Dom','Seg','Ter','Qua','Qui','Sex','SÃ¡b'];
var MONS=['Jan','Fev','Mar','Abr','Mai','Jun','Jul','Ago','Set','Out','Nov','Dez'];
function tick(){
  var d = new Date();
  var t = document.getElementById('pTime');
  var dt = document.getElementById('pDate');
  if(t)  t.textContent  = d.toLocaleTimeString('pt-BR',{hour:'2-digit',minute:'2-digit'});
  if(dt) dt.textContent = DAYS[d.getDay()]+', '+d.getDate()+' '+MONS[d.getMonth()];
}
tick(); setInterval(tick,1000);

// â”€â”€â”€ TOAST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showToast(msg){
  var t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(function(){ t.classList.remove('show'); }, 2800);
}

// â”€â”€â”€ UTILS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function esc(s){
  return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

function getDefaultSlides(){
  return [
    { title:'Cuidar do coraÃ§Ã£o comeÃ§a no dia a dia', image:'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=1200&q=75', duration:20000, dur:20000, badge:'PrevenÃ§Ã£o',
      sections:[
        { h:'O que Ã©?', t:'DoenÃ§as cardiovasculares afetam coraÃ§Ã£o e vasos sanguÃ­neos. Segundo a OMS, sÃ£o a principal causa de mortes no mundo â€” e atÃ© 80% dos casos sÃ£o evitÃ¡veis.', b:[] },
        { h:'HÃ¡bitos que protegem', b:['Movimente-se pelo menos 30 minutos por dia','Prefira alimentos naturais e variados','Consulte seu mÃ©dico regularmente'] }
      ]
    },
    { title:'HipertensÃ£o: o inimigo que age em silÃªncio', image:'https://images.unsplash.com/photo-1584820927498-cfe5211fd8bf?w=1200&q=75', duration:22000, dur:22000, badge:'AtenÃ§Ã£o',
      sections:[
        { h:'O que Ã©?', t:'A pressÃ£o arterial elevada acima de 140/90 mmHg sobrecarrega o coraÃ§Ã£o e danifica os vasos ao longo do tempo â€” muitas vezes sem qualquer sintoma.', b:[] },
        { h:'Sintomas possÃ­veis', b:['Dor de cabeÃ§a pela manhÃ£','Tontura','VisÃ£o turva','Maioria nÃ£o tem sintomas'] },
        { h:'Como cuidar', b:['Reduza o sal','Pratique exercÃ­cios','MeÃ§a a pressÃ£o regularmente'] }
      ]
    }
  ];
}

// keyboard shortcut: Ctrl+S saves
document.addEventListener('keydown', function(e){
  if((e.ctrlKey||e.metaKey) && e.key === 's'){ e.preventDefault(); savePlaylist(); }
});
</script>
</body>
</html>
